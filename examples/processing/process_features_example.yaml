# ==============================================================
# Feature Processing configuration 
# 
# 
# Syntax tip: NO TAB ALLOWED....
#      If there is a tab you will get an error:
#      ScannerError: while scanning for the next token
#      found character '\t' that cannot start any token
#      in "./process_example.yaml", line 133, column 1
# ==============================================================

# Filter file
filter_file: /sdata2/runs/run34/filterdata/detprocess_test_run34.hdf5

# -------------------------------------------------
# Global Feature processing parameters
# -------------------------------------------------

global:
    
    # trace/pretriggger length (continuous data)
    # (can be overwritten for each channel and
    # each channel's algorithms)
    #
    # use samples or msec ("_samples" or "_msec")
    
    trace_length_msec: 20
    pretrigger_length_msec: 10
  

# -------------------------------------------------
# Feature processing confuration for
# INDIVIDUAL channels
# -------------------------------------------------

# channels with fields are automatically enabled
# "all" field refer to all channels (settings can
# then overwritten in channel specific field)


# Settings for specific channels

Melange1pc1ch:
  
    of1x1_nodelay:
        run: True
        lowchi2_fcutoff: 50000
        template_tag: default

    of1x1_unconstrained:
        run: True
        lowchi2_fcutoff: 50000

    of1x1_constrained:
        run: True
        window_min_from_trig_usec: -40
        window_max_from_trig_usec: 40
        lowchi2_fcutoff: 50000

    baseline:
        run: True
        window_min_from_start_usec: 0
        window_max_from_trig_usec: -2000

    baseline_end:   
        run: True
        base_algorithm: baseline
        window_min_from_trig_usec: 2000
        window_max_to_end_usec: 0

    maximum:
        run: True
        window_min_from_trig_usec: -500
        window_max_from_trig_usec: 500

    minimum:
        run: True
        window_min_from_trig_usec: -500
        window_max_from_trig_usec: 500
    
    energyabsorbed:
        run: False
        i0: 88e-9
        rl: 8.8e-3
        vb: 190.6e-9
        window_min_from_trig_usec: -100
        window_max_from_trig_usec: 1000
    
    integral:
        run: True
        window_min_from_trig_usec: -10
        window_max_from_trig_usec: 500
                
    psd_amp:
        run: True
        f_lims: [[45.0, 75.0], [300.0, 500.0], [350.0, 450.0], [150, 250], [250, 350]]


Melange025pcLeft,Melange025pcRight:
    
    of1x1_nodelay:
        run: True
        lowchi2_fcutoff: 50000

    of1x1_unconstrained:
        run: True

    of1x1_constrained:
        run: True
        window_min_from_trig_usec: -40
        window_max_from_trig_usec: 40
        lowchi2_fcutoff: 50000

    baseline:
        run: True
        window_min_from_start_usec: 0
        window_max_from_trig_usec: -2000

    baseline_end:   
        run: True
        base_algorithm: baseline
        window_min_from_trig_usec: 2000
        window_max_to_end_usec: 0

    maximum:
        run: True
        window_min_from_trig_usec: -500
        window_max_from_trig_usec: 500

    minimum:
        run: True
        window_min_from_trig_usec: -500
        window_max_from_trig_usec: 500
    
    energyabsorbed:
        run: False
        i0: 88e-9
        rl: 8.8e-3
        vb: 190.6e-9
        window_min_from_trig_usec: -100
        window_max_from_trig_usec: 1000
    
    integral:
        run: True
        window_min_from_trig_usec: -10
        window_max_from_trig_usec: 500
                
    psd_amp:
        run: True
        f_lims: [[45.0, 75.0], [300.0, 500.0], [350.0, 450.0], [150, 250], [250, 350]]



# -------------------------------------------------
# Feature processing channel combination
# (separator: +,-,|)
# -------------------------------------------------

Melange025pcLeft+Melange025pcRight:
    # feature channel
    feature_channel: Melange025pcSumLeftRight
   
    # weight (default = 1)
    weight_Melange025pcLeft: 0.9
    weight_Melange025pcRight: 1.1
    
    of1x1_constrained:
        run: True
        window_min_from_trig_usec: -40
        window_max_from_trig_usec: 40
        lowchi2_fcutoff: 50000


    baseline:
        run: True
        window_min_from_start_usec: 0
        window_max_from_trig_usec: -2000


Melange025pcLeft|Melange025pcRight:
 

     of2x2_025pc:
        run: True
        base_algorithm: ofnxm
        lowchi2_fcutoff: 50000

        # templates
        template_tag_Melange025pcRight: default
        template_tag_Melange025pcLeft: default
     
        # or if the same tag
        # template_tag: default
       
      